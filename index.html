<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>High Choice — Premium Watches Store</title>
  <meta name="description" content="High Choice — Handpicked original luxury watches. WhatsApp: +91 7869288078" />
  <link rel="icon" href="favicon.png" />
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{ --gold:#d4af37; --muted:rgba(255,255,255,0.78); }
    body { background: linear-gradient(180deg,#040404,#070707); color:#eef0f2; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; }
    .glass { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03); backdrop-filter: blur(6px); }
    .gold-text { background: linear-gradient(90deg,#f7e27d,var(--gold)); -webkit-background-clip:text; color:transparent; font-weight:800; }
    .tilt { transform-style: preserve-3d; transition: transform .18s ease-out; will-change: transform; }
    .img-blank { display:flex; align-items:center; justify-content:center; color:#6b6b6b; background:linear-gradient(180deg,#0b0b0b,#0f0f0f); }
    @keyframes bob { 0%{transform:translateY(0)}50%{transform:translateY(-8px)}100%{transform:translateY(0)} }
  </style>
</head>
<body class="antialiased">

  <div class="max-w-[1200px] mx-auto px-4">

    <!-- HEADER -->
    <header class="flex items-center justify-between py-5 sticky top-4 z-50">
      <div class="flex items-center gap-3">
        <img src="logo.png" alt="High Choice" class="w-14 h-14 object-cover rounded-md shadow-sm" onerror="this.style.display='none'">
        <div>
          <div class="text-xl font-extrabold" style="color:var(--gold)">High Choice</div>
          <div class="text-xs text-gray-400">Premium Original Watches</div>
        </div>
      </div>

      <nav class="hidden md:flex items-center gap-6">
        <a href="#home" class="text-gray-300 hover:text-white">Home</a>
        <a href="#products" class="text-gray-300 hover:text-white">Watches</a>
        <a href="#about" class="text-gray-300 hover:text-white">About</a>
        <a href="https://wa.me/917869288078" class="inline-flex items-center gap-2 px-4 py-2 rounded-md font-semibold"
           style="background: linear-gradient(90deg, rgba(212,175,55,0.95), rgba(247,226,125,0.9)); color:#000">WhatsApp</a>
      </nav>

      <div class="md:hidden">
        <button id="mobileMenuBtn" class="p-2 bg-white/5 rounded-md">Menu</button>
      </div>
    </header>

    <!-- HERO -->
    <section id="home" class="grid md:grid-cols-2 gap-8 items-center py-8">
      <div class="space-y-6">
        <div class="text-sm uppercase font-bold text-gray-400">Limited Curations</div>
        <h1 class="text-4xl md:text-5xl font-extrabold leading-tight">
          Original Luxury Timepieces
          <span class="block gold-text">Handpicked • Verified • Warranty</span>
        </h1>
        <p class="text-gray-300 max-w-xl">
          High Choice sources authenticated original watches — showroom quality, verified documentation, and white-glove aftercare.
        </p>

        <div class="flex gap-3">
          <a href="#products" class="px-5 py-3 rounded-md font-semibold" style="background:linear-gradient(90deg,var(--gold),#f7e27d);color:#000">Shop Collection</a>
          <a href="https://wa.me/917869288078" class="px-5 py-3 rounded-md border border-white/6 text-gray-200">Book via WhatsApp</a>
        </div>

        <div class="text-sm text-gray-400 mt-3">Call/WhatsApp: <strong>+91 7869288078</strong></div>
      </div>

      <div class="glass rounded-xl p-6 flex items-center justify-center" style="height:380px;">
        <!-- featured product area -->
        <div id="featured" class="w-[300px] h-[300px] tilt rounded-xl shadow-2xl flex items-center justify-center overflow-hidden" style="animation:bob 4s ease-in-out infinite;">
          <div id="featuredInner" class="w-full h-full"></div>
        </div>
      </div>
    </section>

    <!-- PRODUCTS -->
    <section id="products" class="py-8">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">Featured Watches</h2>
        <div class="text-sm text-gray-400">Prices: ₹2,500 — ₹4,500</div>
      </div>

      <div id="productGrid" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- JS will populate cards here by detecting watch1..watch50 in repo root -->
      </div>
    </section>

    <!-- CART SUMMARY (floating) -->
    <div id="cartSummary" class="fixed right-6 bottom-6 z-50 w-80 bg-[#0c0c0c] border border-white/6 rounded-xl p-4 shadow-2xl hidden">
      <div class="flex items-center justify-between mb-3">
        <div class="font-semibold">Cart</div>
        <button id="clearCart" class="text-xs text-gray-300">Clear</button>
      </div>
      <div id="cartItems" class="max-h-44 overflow-auto space-y-3 text-sm"></div>
      <div class="mt-3 flex items-center justify-between">
        <div class="font-bold">Total</div>
        <div id="cartTotal" class="font-bold" style="color:var(--gold)">₹ 0</div>
      </div>
      <div class="mt-3 flex gap-2">
        <a id="checkoutBtn" class="flex-1 text-center px-3 py-2 rounded-md text-black font-semibold" style="background:linear-gradient(90deg,var(--gold),#f7e27d)" href="#">Checkout</a>
        <button id="closeCart" class="px-3 py-2 rounded-md border border-white/6">Close</button>
      </div>
    </div>

    <!-- CONTACT / FOOTER -->
    <footer id="contact" class="mt-12 py-10">
      <div class="glass rounded-xl p-6 flex flex-col md:flex-row items-center justify-between gap-4">
        <div>
          <h3 class="font-bold text-xl">Contact & Appointments</h3>
          <p class="text-gray-300">Book showroom visits, request authentication reports or chat on WhatsApp for fast assistance.</p>
        </div>
        <div class="flex gap-3">
          <a href="https://wa.me/917869288078" target="_blank" class="px-4 py-3 rounded-md font-semibold" style="background:linear-gradient(90deg,var(--gold),#f7e27d);color:#000">Chat on WhatsApp</a>
          <a href="tel:+917869288078" class="px-4 py-3 rounded-md border border-white/6">Call</a>
        </div>
      </div>

      <div class="text-center text-gray-400 mt-6">© <span id="year"></span> High Choice • All Rights Reserved</div>
    </footer>

    <!-- floating WA button (small) -->
    <a id="waFloating" href="https://wa.me/917869288078" class="fixed right-6 bottom-6 md:right-10 md:bottom-10 z-40 inline-flex items-center gap-3 bg-gradient-to-b from-green-500 to-green-600 px-4 py-2 rounded-full shadow-2xl">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M21 12.04c0-4.97-4.02-9-9-9s-9 4.03-9 9c0 1.59.41 3.09 1.13 4.41L3 21l4.7-1.22A8.93 8.93 0 0 0 12 21c4.98 0 9-4.03 9-8.96z" fill="#fff"/></svg>
      <span class="font-semibold">Chat</span>
    </a>

  </div>

  <!-- SCRIPTS -->
  <script>
    document.getElementById('year').innerText = new Date().getFullYear();

    // === Utility functions ===
    function prettifyFileName(name) {
      const noExt = name.replace(/\.[^/.]+$/, '');
      // if name matches "watch<number>" then use "Watch #n" else replace underscores/dashes with spaces and capitalize
      const m = noExt.match(/^watch(\d+)$/i);
      if (m) return 'Watch ' + m[1];
      return noExt.replace(/[-_]+/g,' ').split(' ').map(s=> s.charAt(0).toUpperCase()+s.slice(1)).join(' ');
    }

    // deterministic price in ₹2500-₹4500 range based on index (stable)
    function deterministicPrice(i){
      return 2500 + ((i * 373) % 2001); // 2500..4500
    }

    // attempt to load image (returns Promise)
    function tryLoad(src){
      return new Promise((resolve,reject)=>{
        const img = new Image();
        img.onload = ()=> resolve(src);
        img.onerror = ()=> reject(src);
        img.src = src;
      });
    }

    // try common extensions for a base name (root folder)
    async function findImageForBase(base){
      const exts = ['jpg','jpeg','png','webp'];
      for(const e of exts){
        const path = `${base}.${e}`;
        try {
          await tryLoad(path);
          return path;
        } catch(e){}
      }
      throw new Error('not found');
    }

    // scan watch1..watch50 in root and return array of product objects
    async function scanProducts(){
      const products = [];
      const max = 50;
      for(let i=1;i<=max;i++){
        const base = `watch${i}`;
        try {
          const src = await findImageForBase(base);
          products.push({
            id: i,
            src,
            title: prettifyFileName(base),
            price: deterministicPrice(i)
          });
        } catch(e){
          // not found — continue
        }
      }
      return products;
    }

    // Render featured area
    function renderFeatured(product){
      const container = document.getElementById('featuredInner');
      container.innerHTML = '';
      if(!product){
        container.innerHTML = `<div class="img-blank">No featured product</div>`;
        return;
      }
      const img = document.createElement('img');
      img.src = product.src;
      img.alt = product.title;
      img.className = 'object-cover w-full h-full';
      container.appendChild(img);
    }

    // Render product grid
    function renderGrid(products){
      const grid = document.getElementById('productGrid');
      grid.innerHTML = '';
      if(products.length===0){
        grid.innerHTML = `<div class="p-6 text-gray-400">No product images found. Upload images named <code>watch1.jpg</code>, <code>watch2.png</code> ... in the same folder as index.html</div>`;
        return;
      }
      products.forEach(p=>{
        const card = document.createElement('div');
        card.className = 'product-card glass rounded-xl p-4 fade-in';
        card.setAttribute('data-id', p.id);
        card.innerHTML = `
          <div class="relative rounded-lg overflow-hidden h-56 bg-[#0b0b0b]">
            <img src="${p.src}" alt="${p.title}" class="w-full h-full object-cover">
            <div class="absolute right-3 top-3 bg-black/50 text-xs text-gray-200 px-2 py-1 rounded">Featured</div>
          </div>
          <div class="mt-3">
            <h3 class="font-semibold text-lg">${p.title}</h3>
            <p class="text-xs text-gray-400 mt-1">Premium • Verified</p>
            <div class="mt-3 flex items-center justify-between">
              <div class="text-xl font-bold" style="color:var(--gold)">₹ ${p.price}</div>
              <div class="flex gap-2">
                <button class="add-to-cart px-3 py-2 bg-white/5 rounded-md text-sm">Add</button>
                <button class="buy-now px-3 py-2 rounded-md text-sm" style="background:linear-gradient(90deg,var(--gold),#f7e27d);color:#000">Buy</button>
              </div>
            </div>
          </div>
        `;
        grid.appendChild(card);
      });
    }

    // === Cart logic ===
    (function cartModule(){
      let products = []; // will be filled by loader
      const cart = [];

      function renderCart(){
        const container = document.getElementById('cartItems');
        container.innerHTML = '';
        let total = 0;
        cart.forEach(item=>{
          total += item.price * item.qty;
          const div = document.createElement('div');
          div.className = 'flex items-center justify-between';
          div.innerHTML = `<div class="text-sm">${item.title} <span class="text-gray-400 text-xs">×${item.qty}</span></div>
                           <div class="text-sm font-semibold">₹ ${item.price*item.qty}</div>`;
          container.appendChild(div);
        });
        document.getElementById('cartTotal').innerText = '₹ ' + total;
      }

      function showCart(){ document.getElementById('cartSummary').classList.remove('hidden'); }
      function hideCart(){ document.getElementById('cartSummary').classList.add('hidden'); }

      // attach handlers after grid render
      function attachHandlers(){
        // add-to-cart
        document.querySelectorAll('.add-to-cart').forEach(btn=>{
          btn.addEventListener('click', (e)=>{
            const card = e.target.closest('.product-card');
            const id = Number(card.getAttribute('data-id'));
            const prod = products.find(p=>p.id===id);
            if(!prod) return;
            const found = cart.find(c=>c.id===id);
            if(found) found.qty++;
            else cart.push({...prod, qty:1});
            renderCart();
            showCart();
          });
        });

        // buy-now
        document.querySelectorAll('.buy-now').forEach(btn=>{
          btn.addEventListener('click', (e)=>{
            const card = e.target.closest('.product-card');
            const id = Number(card.getAttribute('data-id'));
            const prod = products.find(p=>p.id===id);
            if(!prod) return;
            const text = encodeURIComponent(`Hi, I want to buy ${prod.title} (₹${prod.price}).`);
            window.open(`https://wa.me/917869288078?text=${text}`, '_blank');
          });
        });

        // clicking a product sets featured image
        document.querySelectorAll('.product-card').forEach(card=>{
          card.addEventListener('click', (e)=>{
            // avoid clicks on buttons
            if(e.target.tagName.toLowerCase() === 'button') return;
            const id = Number(card.getAttribute('data-id'));
            const prod = products.find(p=>p.id===id);
            if(prod) renderFeatured(prod);
          });
        });

        // cart UI
        document.getElementById('clearCart').addEventListener('click', ()=>{ cart.length=0; renderCart(); hideCart(); });
        document.getElementById('closeCart').addEventListener('click', hideCart);
        document.getElementById('checkoutBtn').addEventListener('click', ()=>{
          if(cart.length === 0){ alert('Cart is empty'); return; }
          let msg = 'Order%20Details%0A';
          let total=0;
          cart.forEach(i=>{
            msg += `${encodeURIComponent(i.title)}%20x${i.qty}%20=₹${i.price*i.qty}%0A`;
            total += i.price*i.qty;
          });
          msg += `%0ATotal:%20₹${total}`;
          window.open(`https://wa.me/917869288078?text=${msg}`, '_blank');
        });
      }

      // Expose a method to set products
      window.__cartModuleSetProducts = function(plist){
        products = plist;
        attachHandlers();
      };
    })();

    // === Tilt effect for featured ===
    (function(){
      const el = document.getElementById('featured');
      if(!el) return;
      el.addEventListener('mousemove', (e)=>{
        const r = el.getBoundingClientRect();
        const cx = r.left + r.width/2;
        const cy = r.top + r.height/2;
        const dx = e.clientX - cx;
        const dy = e.clientY - cy;
        const rx = (-dy/20).toFixed(2);
        const ry = (dx/20).toFixed(2);
        el.style.transform = `perspective(800px) rotateX(${rx}deg) rotateY(${ry}deg)`;
      });
      el.addEventListener('mouseleave', ()=> el.style.transform = 'perspective(800px) rotateX(0deg) rotateY(0deg)');
    })();

    // === Main loader: detect watch1..watch50 and render ===
    (async function main(){
      // show temporary message
      const grid = document.getElementById('productGrid');
      grid.innerHTML = `<div class="p-6 text-gray-400">Scanning for product images (watch1..watch50) in root folder...</div>`;

      const products = await scanProducts(); // uses findImageForBase
      // build product list with stable fields
      const productList = products.map(p => ({
        id: p.id,
        src: p.src,
        title: prettifyFileName(p.src.replace(/\.[^/.]+$/, '')),
        price: deterministicPrice(p.id)
      }));

      // if no products found, show hint
      if(productList.length === 0){
        grid.innerHTML = `<div class="p-6 text-gray-400">No product images found. Upload images to the same folder as index.html and name them <code>watch1.jpg</code>, <code>watch2.png</code>, etc.</div>`;
        document.getElementById('featuredInner').innerHTML = `<div class="img-blank">Upload watch1.jpg ...</div>`;
        return;
      }

      // render initial featured as first product
      renderFeatured(productList[0]);
      // render grid
      renderGrid(productList);

      // pass products to cart module
      if(window.__cartModuleSetProducts) window.__cartModuleSetProducts(productList);
    })();

  </script>

</body>
</html>
