<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>HIGH CHOICE — Premium 3D Watches</title>
<meta name="description" content="HIGH CHOICE — Premium watch showroom. 3D mockups, UPI checkout & WhatsApp orders." />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;600;800&family=Playfair+Display:wght@500;700&display=swap" rel="stylesheet">

<!-- GSAP -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

<!-- three.js -->
<script src="https://unpkg.com/three@0.152.2/build/three.min.js"></script>
<script src="https://unpkg.com/three@0.152.2/examples/js/loaders/GLTFLoader.js"></script>
<script src="https://unpkg.com/three@0.152.2/examples/js/postprocessing/EffectComposer.js"></script>
<script src="https://unpkg.com/three@0.152.2/examples/js/postprocessing/RenderPass.js"></script>
<script src="https://unpkg.com/three@0.152.2/examples/js/postprocessing/UnrealBloomPass.js"></script>

<style>
:root{
  --bg:#060606;
  --gold:#c7a16a;
  --gold-2:#e6c88a;
  --muted:#b6bcc0;
  --glass: rgba(255,255,255,0.03);
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:
  radial-gradient(1200px 600px at 8% 10%, rgba(199,161,106,0.04), transparent),
  linear-gradient(180deg,var(--bg),#020202);
  color:#fff;font-family:Inter,system-ui,Arial;-webkit-font-smoothing:antialiased}
a{color:inherit;text-decoration:none}
img{display:block;max-width:100%}

/* Header */
header{position:fixed;top:0;left:0;right:0;z-index:200;padding:14px 28px;display:flex;align-items:center;
  backdrop-filter: blur(6px);
  background:linear-gradient(180deg, rgba(0,0,0,0.6), transparent);
  border-bottom:1px solid rgba(255,255,255,0.02)}
.brand{font-family:"Playfair Display",serif;color:var(--gold);font-weight:800;letter-spacing:0.8px}
nav{margin-left:auto;display:flex;gap:12px;align-items:center}
nav a{padding:8px 12px;border-radius:8px;color:var(--muted);font-weight:700}
nav a.cta{background:linear-gradient(90deg,var(--gold),var(--gold-2));color:#071018;font-weight:900}

/* Layout */
main{padding-top:86px}
.container{max-width:1280px;margin:0 auto;padding:28px}
.hero{display:grid;grid-template-columns:1fr 640px;gap:36px;align-items:center;min-height:82vh}
@media(max-width:1000px){ .hero{grid-template-columns:1fr;padding:20px;gap:18px} }

/* Left */
.eyebrow{color:var(--gold);font-weight:900;letter-spacing:1.4px}
h1{font-family:"Playfair Display",serif;font-size:44px;margin:8px 0;color:var(--gold);line-height:1.02}
.lead{color:var(--muted);max-width:640px;line-height:1.6;margin-top:12px}
.cta-row{margin-top:18px;display:flex;gap:12px;flex-wrap:wrap}
.btn{padding:12px 18px;border-radius:999px;font-weight:900;display:inline-flex;align-items:center;gap:10px;cursor:pointer}
.btn.primary{background:linear-gradient(90deg,var(--gold),var(--gold-2));color:#071018}
.btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)}

/* Viewer (right) */
.viewer-wrap{position:relative;border-radius:18px;overflow:hidden;background:linear-gradient(180deg,#050505,#0a0a0a);border:1px solid rgba(255,255,255,0.03);box-shadow:0 60px 180px rgba(0,0,0,0.7);height:640px;display:flex;align-items:center;justify-content:center}
@media(max-width:1000px){ .viewer-wrap{height:420px} }
canvas#viewerCanvas{width:100%;height:100%;display:block}
.viewer-ui{position:absolute;left:18px;bottom:18px;display:flex;flex-direction:column;gap:8px;z-index:40}
.pill{background:var(--glass);padding:8px 12px;border-radius:999px;border:1px solid rgba(255,255,255,0.02);color:var(--muted);font-weight:700}
.glow{position:absolute;inset:auto 12% 60% auto;width:220px;height:220px;border-radius:50%;filter:blur(40px);pointer-events:none;background:radial-gradient(circle at 30% 30%, rgba(199,161,106,0.16), transparent 28%)}

/* Strip */
.strip{margin-top:28px}
.strip-inner{display:flex;gap:18px;align-items:center;overflow:hidden;padding:12px}
.card{width:240px;height:260px;border-radius:16px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03);display:flex;flex-direction:column;align-items:center;justify-content:center;padding:12px;flex-shrink:0;transition:transform .28s,box-shadow .28s}
.card:hover{transform:translateY(-12px) scale(1.03);box-shadow:0 44px 120px rgba(0,0,0,0.75)}
.card img{width:86%;height:140px;object-fit:cover;border-radius:10px}
.card h4{margin:10px 0 0;font-size:15px;font-weight:800;color:var(--gold)}
.card p{margin:6px 0 0;color:var(--muted);font-size:13px}

/* Modal */
.modal-back{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:flex;align-items:center;justify-content:center;z-index:999;backdrop-filter:blur(4px);padding:24px}
.modal{width:960px;max-width:98%;background:#070707;border-radius:14px;padding:18px;border:1px solid rgba(255,255,255,0.04);box-shadow:0 40px 140px rgba(0,0,0,0.8)}
.modal-grid{display:grid;grid-template-columns:1fr 360px;gap:18px}
.modal-left img{width:100%;border-radius:12px}
.product-title{font-family:"Playfair Display",serif;font-size:22px;color:var(--gold);margin:0}
.price{font-weight:900;color:var(--gold);margin-top:8px}
.qr{width:220px;height:220px;border-radius:8px;background:#0b0b0b;display:flex;align-items:center;justify-content:center;border:1px solid rgba(255,255,255,0.03)}

/* Footer */
footer{padding:28px;text-align:center;color:var(--muted);margin-top:32px;border-top:1px solid rgba(255,255,255,0.03) }

/* small screen */
@media(max-width:780px){
  .modal-grid{grid-template-columns:1fr}
  .hero{grid-template-columns:1fr}
  h1{font-size:32px}
}
</style>
</head>
<body>

<header>
  <div class="brand">HIGH CHOICE</div>
  <nav>
    <a href="index.html">Home</a>
    <a href="mens.html">Men</a>
    <a href="womens.html">Women</a>
    <a href="kids.html">Kids</a>
    <a href="360.html">360°</a>
    <a class="cta" href="contact.html">WhatsApp</a>
  </nav>
</header>

<main>
  <div class="container">
    <section class="hero">
      <!-- LEFT -->
      <div>
        <div class="eyebrow">CINEMATIC • CREATIVE</div>
        <h1>High Choice — Unique International<br>Premium Watch Experience</h1>
        <div class="lead">Ultra-premium 3D mockups, cinematic lighting and trusted checkout. Click any product to preview, generate UPI QR and send order via WhatsApp. This demo uses high-quality Unsplash photos — replace with your assets for final production.</div>

        <div class="cta-row">
          <button class="btn primary" id="goMen">Shop Men</button>
          <button class="btn ghost" id="goRolex">Explore Rolex</button>
        </div>

        <div style="display:flex;gap:10px;margin-top:18px">
          <div class="pill">360° Viewer</div>
          <div class="pill">UPI + COD</div>
          <div class="pill">Instant WhatsApp Order</div>
        </div>
      </div>

      <!-- RIGHT: VIEWER -->
      <div class="viewer-wrap" id="viewerWrap" aria-label="3D viewer">
        <div class="glow"></div>
        <canvas id="viewerCanvas"></canvas>
        <div class="viewer-ui" aria-hidden="true">
          <div class="pill">Drag to rotate</div>
          <div class="pill">Scroll to zoom</div>
        </div>
      </div>
    </section>

    <!-- Featured strip -->
    <section class="strip" aria-label="Featured">
      <h3 style="text-align:center;color:var(--gold);margin-bottom:12px">Featured — Handpicked</h3>
      <div class="strip-inner" id="stripInner" tabindex="0" role="list"></div>
    </section>

    <footer>© 2025 HIGH CHOICE • WhatsApp: <a href="https://wa.me/917020966879" style="color:var(--gold)">+91 70209 66879</a></footer>
  </div>
</main>

<!-- PRODUCT MODAL -->
<div id="modalRoot" class="modal-back" style="display:none">
  <div class="modal" role="dialog" aria-modal="true">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
      <div style="font-weight:900;color:var(--muted)">Product Preview</div>
      <button id="closeModal" style="background:transparent;border:0;color:var(--muted);font-weight:800;cursor:pointer">✕</button>
    </div>

    <div class="modal-grid">
      <div class="modal-left">
        <img id="modalImg" src="" alt="product image">
      </div>
      <div class="modal-right">
        <h3 class="product-title" id="modalTitle"></h3>
        <div class="price" id="modalPrice"></div>
        <div style="color:var(--muted);margin-top:8px" id="modalDesc">Fine stainless steel, sapphire crystal, premium finish. Replace description per model.</div>

        <div style="margin-top:12px">
          <label style="color:var(--muted);font-weight:700">Payment</label>
          <select id="payMethod" style="padding:10px;border-radius:10px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);width:100%;margin-top:8px">
            <option value="upi">Prepaid (UPI)</option>
            <option value="cod">Cash on Delivery (COD)</option>
          </select>

          <div id="qrBlock" style="display:block;margin-top:12px">
            <div style="font-weight:800;color:var(--muted);margin-bottom:8px">Scan to pay (UPI)</div>
            <div class="qr" id="qrImage"><img id="qrImg" src="" alt="QR" style="width:90%;height:90%"></div>
          </div>

          <div style="display:flex;gap:10px;margin-top:12px">
            <button id="confirmOrder" class="btn primary">Confirm & WhatsApp</button>
            <button id="addToCart" class="btn ghost">Add to Cart</button>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<script>
/* ---------------------------
   CONFIG
----------------------------*/
const UPI_ID = "7869288078@kotak811"; // user-provided
const BUSINESS_NAME = "HIGH CHOICE";

/* ---------------------------
   PRODUCTS (prices from user list)
   Price units: rupees (integer)
----------------------------*/
const PRODUCTS = {
  "Rolex": [
    {slug:"rolex-yachtmaster", name:"Rolex yachtmaster automatic", price:2499, image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&w=1200&q=90"},
    {slug:"rolex-daudate-shift", name:"Rolex daudate shift movement", price:1699, image:"https://images.unsplash.com/photo-1522312346375-d1a52e2b99b3?auto=format&w=1200&q=90"},
    {slug:"rolex-submariner-shift", name:"Rolex submariner shift movement", price:1599, image:"https://images.unsplash.com/photo-1518544889289-f1c1a3a4e9c5?auto=format&w=1200&q=90"},
    {slug:"rolex-daytona", name:"Rolex Daytona", price:2199, image:"https://images.unsplash.com/photo-1524749292158-c90489c5afd2?auto=format&w=1200&q=90"},
    {slug:"rolex-sun-moon", name:"Rolex sun moon edition", price:1699, image:"https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?auto=format&w=1200&q=90"},
    {slug:"rolex-datejust", name:"Rolex Datejust Automatic", price:3499, image:"https://images.unsplash.com/photo-1543163521-1bf539c55f7b?auto=format&w=1200&q=90"},
    {slug:"rolex-explorer2", name:"Rolex explorer 2", price:3999, image:"https://images.unsplash.com/photo-1504712598893-24159a89200e?auto=format&w=1200&q=90"},
    {slug:"rolex-king-automatic", name:"Rolex king automatic", price:1899, image:"https://images.unsplash.com/photo-1517336714731-489689fd1ca8?auto=format&w=1200&q=90"},
    {slug:"rolex-gmt", name:"Rolex GMT shift movement", price:1699, image:"https://images.unsplash.com/photo-1511379938547-c1f69419868d?auto=format&w=1200&q=90"},
    {slug:"rolex-sky-dweller", name:"Rolex sky dweller shift movement", price:1499, image:"https://images.unsplash.com/photo-1521334884684-d80222895322?auto=format&w=1200&q=90"}
  ],
  "Maserati":[
    {slug:"maserati-1", name:"Maserati automatic skeleton", price:2199, image:"https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?auto=format&w=1200&q=90"},
    {slug:"maserati-2", name:"Maserati attraziane", price:1999, image:"https://images.unsplash.com/photo-1522312346375-d1a52e2b99b3?auto=format&w=1200&q=90"},
    {slug:"maserati-3", name:"Maserati classic automatic", price:2499, image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&w=1200&q=90"},
    {slug:"maserati-4", name:"Maserati potenza automatic", price:2299, image:"https://images.unsplash.com/photo-1504712598893-24159a89200e?auto=format&w=1200&q=90"}
  ],
  "Omega":[
    {slug:"omega-worldmap", name:"Omega Worldmap", price:1799, image:"https://images.unsplash.com/photo-1522312346375-d1a52e2b99b3?auto=format&w=1200&q=90"},
    {slug:"omega-speedmaster", name:"Omega speedmaster", price:4299, image:"https://images.unsplash.com/photo-1524749292158-c90489c5afd2?auto=format&w=1200&q=90"},
    {slug:"omega-seemaster", name:"Omega seemaster", price:1899, image:"https://images.unsplash.com/photo-1518544889289-f1c1a3a4e9c5?auto=format&w=1200&q=90"},
    {slug:"omega-worldmap2", name:"Omega Worldmap 2", price:2099, image:"https://images.unsplash.com/photo-1504712598893-24159a89200e?auto=format&w=1200&q=90"},
    {slug:"omega-seamaster-auto", name:"Omega Seamaster Automatic", price:4899, image:"https://images.unsplash.com/photo-1517336714731-489689fd1ca8?auto=format&w=1200&q=90"},
    {slug:"omega-sunmoon", name:"Omega sun moon edition", price:1799, image:"https://images.unsplash.com/photo-1521334884684-d80222895322?auto=format&w=1200&q=90"}
  ],
  "G-Shock":[
    {slug:"gsh-ga-v01", name:"G shock Ga V01", price:1849, image:"https://images.unsplash.com/photo-1543163521-1bf539c55f7b?auto=format&w=1200&q=90"},
    {slug:"gsh-ga2100", name:"G shock Ga2100", price:1299, image:"https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?auto=format&w=1200&q=90"},
    {slug:"gsh-gm2100", name:"G shock Gm2100", price:1499, image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&w=1200&q=90"},
    {slug:"gsh-ga2300", name:"G shock Ga2300", price:1199, image:"https://images.unsplash.com/photo-1522312346375-d1a52e2b99b3?auto=format&w=1200&q=90"}
  ],
  "Armani":[
    {slug:"armani-ax", name:"Armani Ax", price:1499, image:"https://images.unsplash.com/photo-1517336714731-489689fd1ca8?auto=format&w=1200&q=90"},
    {slug:"armani-dante", name:"Armani Exchange Dante", price:1999, image:"https://images.unsplash.com/photo-1524749292158-c90489c5afd2?auto=format&w=1200&q=90"}
  ],
  "Patek":[
    {slug:"patek-cubitus-blue", name:"Patek Philippe Cubitus Blue", price:3299, image:"https://images.unsplash.com/photo-1521334884684-d80222895322?auto=format&w=1200&q=90"},
    {slug:"patek-nautilus", name:"Patek Philippe Nautilus Sun moon Automatic", price:5999, image:"https://images.unsplash.com/photo-1504712598893-24159a89200e?auto=format&w=1200&q=90"}
  ],
  "Audemars":[
    {slug:"ap-aura", name:"Audemars Piguet Aura", price:1299, image:"https://images.unsplash.com/photo-1522312346375-d1a52e2b99b3?auto=format&w=1200&q=90"},
    {slug:"ap-diamond", name:"Audemars Piguet Diamond Automatic", price:6499, image:"https://images.unsplash.com/photo-1524749292158-c90489c5afd2?auto=format&w=1200&q=90"}
  ],
  "Cartier":[
    {slug:"cartier-santos", name:"Cartier Santos Automatic", price:4099, image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&w=1200&q=90"},
    {slug:"cartier-ballon", name:"Cartier Ballon", price:1399, image:"https://images.unsplash.com/photo-1518544889289-f1c1a3a4e9c5?auto=format&w=1200&q=90"}
  ],
  "Tissot":[
    {slug:"tissot-leather", name:"Tissot 1853 leather belt", price:1399, image:"https://images.unsplash.com/photo-1517336714731-489689fd1ca8?auto=format&w=1200&q=90"},
    {slug:"tissot-prx", name:"Tissot Prx BackOpen", price:1699, image:"https://images.unsplash.com/photo-1522312346375-d1a52e2b99b3?auto=format&w=1200&q=90"}
  ],
  "Rado":[
    {slug:"rado-centrix", name:"Rado Centrix", price:2699, image:"https://images.unsplash.com/photo-1524749292158-c90489c5afd2?auto=format&w=1200&q=90"}
  ],
  "Longines":[
    {slug:"longines-master", name:"Longines Master Collection Moonphase", price:2499, image:"https://images.unsplash.com/photo-1504712598893-24159a89200e?auto=format&w=1200&q=90"}
  ],
  /* Women / Kids (short samples) */
  "Women": [
    {slug:"mk-1", name:"MICHAEL KORS - Classic", price:1699, image:"https://images.unsplash.com/photo-1522312346375-d1a52e2b99b3?auto=format&w=1200&q=90"},
    {slug:"dior-1", name:"DIOR - Signature", price:1849, image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&w=1200&q=90"}
  ],
  "Kids":[
    {slug:"casio-kids", name:"Casio Kids", price:999, image:"https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?auto=format&w=1200&q=90"}
  ]
};

/* ---------------------------
   UTILITIES
----------------------------*/
function formatINR(n){
  return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}

/* ---------------------------
   Populate featured strip (first item of each brand)
----------------------------*/
(function populateStrip(){
  const wrap = document.getElementById('stripInner');
  const picks = [];
  Object.keys(PRODUCTS).forEach(b=>{
    const list = PRODUCTS[b];
    if(list && list.length) picks.push({brand:b, item:list[0]});
  });
  const repeated = [...picks, ...picks, ...picks];
  wrap.innerHTML = repeated.map(p=>{
    return `<div class="card" role="button" data-brand="${p.brand}" data-slug="${p.item.slug}" data-price="${p.item.price}" data-name="${p.item.name}" data-img="${p.item.image}">
      <img src="${p.item.image}" alt="${p.item.name}">
      <h4>${p.item.name}</h4>
      <p>₹ ${formatINR(p.item.price)}</p>
    </div>`;
  }).join('');
})();

/* ---------------------------
   Carousel auto-scroll + drag
----------------------------*/
(function carouselLoop(){
  const inner = document.getElementById('stripInner');
  let pos = 0, speed = 0.6;
  function loop(){ pos += speed; const max = inner.scrollWidth/3; if(pos > max) pos = 0; inner.style.transform = `translateX(${-pos}px)`; requestAnimationFrame(loop); }
  requestAnimationFrame(loop);
  let down=false, startX=0, last=0;
  inner.addEventListener('pointerdown', e=>{ down=true; startX=e.clientX; last=pos; inner.style.cursor='grabbing'; });
  window.addEventListener('pointerup', ()=>{ down=false; inner.style.cursor='grab'; });
  window.addEventListener('pointermove', e=>{ if(!down) return; const dx = e.clientX - startX; pos = Math.max(0, last - dx); });
})();

/* ---------------------------
   Modal (product preview + UPI QR + WhatsApp)
----------------------------*/
const modalRoot = document.getElementById('modalRoot');
const modalImg = document.getElementById('modalImg');
const modalTitle = document.getElementById('modalTitle');
const modalPrice = document.getElementById('modalPrice');
const qrImg = document.getElementById('qrImg');
const payMethod = document.getElementById('payMethod');

document.getElementById('stripInner').addEventListener('click', (e)=>{
  const card = e.target.closest('.card');
  if(!card) return;
  openProductModal({
    slug: card.dataset.slug,
    name: card.dataset.name,
    price: Number(card.dataset.price),
    image: card.dataset.img
  });
});

document.getElementById('closeModal').addEventListener('click', ()=> modalRoot.style.display='none');
payMethod.addEventListener('change', ()=> {
  document.getElementById('qrBlock').style.display = (payMethod.value === 'upi') ? 'block' : 'none';
});

function generateUPIQR(amount){
  // Build UPI deep link
  const upiLink = `upi://pay?pa=${encodeURIComponent(UPI_ID)}&pn=${encodeURIComponent(BUSINESS_NAME)}&am=${encodeURIComponent(amount)}&cu=INR`;
  const qrUrl = 'https://chart.googleapis.com/chart?cht=qr&chs=300x300&chl=' + encodeURIComponent(upiLink);
  qrImg.src = qrUrl;
  qrImg.alt = 'UPI QR';
}

function openProductModal(product){
  modalRoot.style.display='flex';
  modalImg.src = product.image;
  modalTitle.textContent = product.name;
  modalPrice.textContent = "₹ " + formatINR(product.price);
  generateUPIQR(product.price);
  document.getElementById('confirmOrder').onclick = ()=> confirmOrder(product);
  document.getElementById('addToCart').onclick = ()=> { alert('Added to cart (demo).'); };
}

function confirmOrder(product){
  const method = payMethod.value;
  if(method === 'upi'){
    // Ask user to scan and confirm — then open WhatsApp with filled message (demo flow)
    const proceed = confirm('Scan QR and complete payment. Press OK after payment to send order via WhatsApp.');
    if(!proceed) return;
  }
  // Build WhatsApp message
  const text = `New order from HIGH CHOICE\nProduct: ${product.name}\nPrice: ₹${product.price}\nPayment: ${method}\nUPI: ${UPI_ID}\nName:\nContact:\nAddress:`;
  const wa = `https://wa.me/91${'7020966879'.replace(/\D/g,'')}?text=${encodeURIComponent(text)}`;
  window.open(wa,'_blank');
  modalRoot.style.display='none';
}

/* ---------------------------
   3D Viewer — loads GLB else falls back to textured plane (image)
   Cinematic lighting + GSAP entrance
----------------------------*/
(function init3D(){
  const viewer = document.getElementById('viewerWrap');
  const canvas = document.getElementById('viewerCanvas');
  const renderer = new THREE.WebGLRenderer({canvas, antialias:true, alpha:true});
  renderer.setPixelRatio(Math.min(window.devicePixelRatio || 1, 2));
  renderer.setSize(viewer.clientWidth, viewer.clientHeight, false);
  renderer.outputEncoding = THREE.sRGBEncoding;
  renderer.toneMapping = THREE.ACESFilmicToneMapping;
  renderer.toneMappingExposure = 1;

  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(36, viewer.clientWidth / viewer.clientHeight, 0.1, 1000);
  camera.position.set(0,0,3.2);

  // Lights
  scene.add(new THREE.HemisphereLight(0xffffff, 0x080808, 0.35));
  const key = new THREE.DirectionalLight(0xfff3d1, 1.2); key.position.set(5,6,4); scene.add(key);
  const rim = new THREE.DirectionalLight(0xffe6b3, 0.45); rim.position.set(-5,4,-6); scene.add(rim);
  scene.add(new THREE.AmbientLight(0x404040, 0.7));

  // Floor
  const floor = new THREE.Mesh(new THREE.PlaneGeometry(8,8), new THREE.MeshStandardMaterial({color:0x000000, metalness:0.2, roughness:0.6}));
  floor.rotation.x = -Math.PI/2; floor.position.y = -1.05; scene.add(floor);

  const root = new THREE.Group(); scene.add(root);

  // Try bloom composer
  let composer = null;
  try {
    composer = new THREE.EffectComposer(renderer);
    const rp = new THREE.RenderPass(scene, camera); composer.addPass(rp);
    const bloom = new THREE.UnrealBloomPass(new THREE.Vector2(viewer.clientWidth, viewer.clientHeight), 0.5, 0.6, 0.1);
    bloom.threshold = 0.0; bloom.strength = 0.45; bloom.radius = 0.4; composer.addPass(bloom);
  } catch(e){ composer = null; }

  // Load GLB if exists, else fallback to hero image textured plane
  const loader = new THREE.GLTFLoader();
  let modelLoaded = false;
  loader.load('assets/models/watch.glb', (gltf)=>{
    const obj = gltf.scene;
    obj.traverse(n=>{ if(n.isMesh){ n.castShadow=true; n.receiveShadow=true; if(n.material){ n.material.metalness = n.material.metalness ?? 0.6; n.material.roughness = n.material.roughness ?? 0.35 } }});
    // center and scale
    const box = new THREE.Box3().setFromObject(obj);
    const size = box.getSize(new THREE.Vector3()).length();
    const center = box.getCenter(new THREE.Vector3());
    obj.position.sub(center);
    const scale = 1.05 / size;
    obj.scale.setScalar(scale);
    root.add(obj);
    modelLoaded = true;
  }, undefined, (err)=>{
    // fallback plane with premium Unsplash image
    const url = 'https://images.unsplash.com/photo-1518544889289-f1c1a3a4e9c5?auto=format&w=1400&q=90';
    const tex = new THREE.TextureLoader().load(url);
    tex.encoding = THREE.sRGBEncoding;
    const geo = new THREE.PlaneGeometry(1.9,1.9);
    const mat = new THREE.MeshStandardMaterial({map:tex, metalness:0.18, roughness:0.45});
    const mesh = new THREE.Mesh(geo, mat); mesh.rotation.y = -0.18; root.add(mesh);
    modelLoaded = true;
  });

  // interaction: drag rotate, wheel zoom
  let dragging=false,lastX=0,targetY=0;
  viewer.addEventListener('pointerdown', (e)=>{ dragging=true; lastX=e.clientX; viewer.style.cursor='grabbing'; });
  window.addEventListener('pointerup', ()=>{ dragging=false; viewer.style.cursor='default'; });
  window.addEventListener('pointermove', (e)=>{ if(!dragging) return; const dx=(e.clientX-lastX)/200; targetY += dx; lastX=e.clientX; });

  viewer.addEventListener('wheel', (e)=>{ e.preventDefault(); camera.position.z += e.deltaY*0.002; camera.position.z = Math.min(Math.max(camera.position.z, 1.6), 6); }, {passive:false});

  // animate
  let last = performance.now();
  function animate(){
    const now = performance.now();
    const dt = (now - last)/1000; last = now;
    root.rotation.y += dt * 0.12;
    root.rotation.y += (targetY - root.rotation.y) * 0.08;
    root.rotation.z = Math.sin(now*0.0006) * 0.015;
    if(composer) composer.render(); else renderer.render(scene,camera);
    requestAnimationFrame(animate);
  }
  animate();

  // resize support
  window.addEventListener('resize', ()=>{
    const w = viewer.clientWidth, h = viewer.clientHeight;
    renderer.setSize(w,h,false);
    if(composer) composer.setSize(w,h);
    camera.aspect = w/h; camera.updateProjectionMatrix();
  });

  // entrance
  root.scale.setScalar(0.96);
  gsap.to(root.scale, {x:1,y:1,z:1,duration:1.2,ease:"power3.out"});
})();

/* ---------------------------
   Small UI: nav buttons
----------------------------*/
document.getElementById('goMen').addEventListener('click', ()=> window.location.href='mens.html');
document.getElementById('goRolex').addEventListener('click', ()=> window.location.href='brand.html?brand=Rolex');

/* ---------------------------
   Initial micro-animations
----------------------------*/
gsap.from(".brand", {y:-8, opacity:0, duration:0.7});
gsap.from("h1", {y:26, opacity:0, duration:1, delay:0.12, ease:"power3.out"});
gsap.from(".lead", {y:18, opacity:0, duration:0.9, delay:0.22});
gsap.from(".btn", {y:16, opacity:0, duration:0.9, delay:0.32, stagger:0.08});

</script>
</body>
</html>
