<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Product – High Choice</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
body { margin: 0; background: #000; color: #fff; font-family: Poppins, sans-serif; }
.container { padding: 20px; }
img { width: 100%; border-radius: 12px; }
.title { font-size: 26px; font-weight: 700; margin: 15px 0; color: gold; }
.price { font-size: 22px; margin: 10px 0; }
.desc { opacity: 0.8; line-height: 1.6; }
.btn { background: gold; color: #000; padding: 15px; width: 100%; border-radius: 10px; text-align: center; font-weight: 700; font-size: 18px; margin-top: 20px; }
</style>
</head>

<body>
<div class="container">
  <img id="pimg">
  <div class="title" id="pname"></div>
  <div class="price" id="pprice"></div>
  <p class="desc" id="pdesc"></p>

  <div class="btn" onclick="buy()">Buy Now</div>
</div>

<script>
// init supabase
const supabaseUrl = "https://vkapzhbghyjzhscxsxnh.supabase.co";
const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZrYXB6aGJnaHlqemhzY3hzeG5oIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5ODQ0MjgsImV4cCI6MjA4MDU2MDQyOH0.izm4PRrrRS7cVsP7KCQIXls12QuzBb8YCCNtKLYDIak";

const sb = supabase.createClient(supabaseUrl, supabaseKey);

// load product
async function loadProduct() {
  const pid = localStorage.getItem("product_id");

  let { data } = await sb.from("products").select("*").eq("id", pid).single();

  document.getElementById("pname").innerText = data.name;
  document.getElementById("pprice").innerText = "₹" + data.price;
  document.getElementById("pdesc").innerText = data.description;
  document.getElementById("pimg").src = data.image;
}

loadProduct();

// Buy Now → WhatsApp + UPI QR Auto Amount
function buy() {
  const name = document.getElementById("pname").innerText;
  const price = document.getElementById("pprice").innerText.replace("₹","");

  let link =
    "https://wa.me/7020966879?text=" +
    encodeURIComponent(
      `Hi, I want to order:\nProduct: ${name}\nPrice: ₹${price}`
    );

  window.location = link;
}
</script>

</body>
</html>
